## Appeals (обращения) — чеклист

- Авторизованный пользователь открывает /cabinet/appeals — видит свои обращения со статусами и датами.
- Кнопка «Новое обращение» ведет на /cabinet/appeals/new, форма отправляет обращение, после сабмита редирект на список с баннером «Обращение принято».
- Параметр `?prefill=` заполняет текст обращения (передать из помощника).
- Гость при попытке создания перенаправляется на /login?next=/cabinet/appeals/new.
- Во вкладке «Связаться» в помощнике кнопка «Создать» ведет на форму (или на /login для гостя).
- Админ/правление видят /admin/appeals, фильтруют по статусу/теме, меняют статус и ответ; детальная страница /admin/appeals/[id] работает.
- В admin детальной странице статус/ответ сохраняются, возврат к списку работает.
- Фильтры в /admin/appeals по статусу/теме/поиску реально отбирают записи.
- Браузерная навигация со списком обращений (вперед/назад) не теряет баннер принятия после сабмита.
- POST rate limit: после 5 обращений за 10 минут API возвращает 429 с понятным текстом, форма показывает сообщение.
- Валидация: тема вне списка или сообщение <10 символов даёт 400/ошибку в форме; HTML не принимается, текст сохраняется как plain.
- updatedBy/repliedAt фиксируются при изменении статуса/ответа; statusUpdatedAt меняется при PATCH.
- unreadByUser: если в админке добавлен ответ/статус answered — на /cabinet/appeals видно бейдж «Есть ответ», на /cabinet карточка виден индикатор «Ответы по обращениям: N».
- POST /api/appeals/[id]/read помечает обращение прочитанным и скрывает бейдж; в списке my API возвращает unreadCount.
- В помощнике во вкладке «Связаться» отображается счётчик ответов по обращениям и ссылка на /cabinet/appeals, если пользователь авторизован.
