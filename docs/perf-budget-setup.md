# Performance Budget Setup - –û—Ç—á–µ—Ç

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. ‚úÖ @next/bundle-analyzer —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–§–∞–π–ª**: `next.config.ts`
- Bundle analyzer —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω
- –í–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ `ANALYZE=true`
- –°–∫—Ä–∏–ø—Ç `analyze` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ `package.json`

### 2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `perf:budget`

**–§–∞–π–ª**: `scripts/check-bundle-size.mjs`
- –ü–∞—Ä—Å–∏—Ç –≤—ã–≤–æ–¥ `npm run build`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑–º–µ—Ä JS bundle –¥–ª—è `/` –∏ `/login`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç gzip: ~0.3
- –õ–∏–º–∏—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `BUNDLE_BUDGET_KB` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 350 KB)
- –í—ã–≤–æ–¥–∏—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- Exit code 1 –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞

**–§–∞–π–ª**: `package.json`
```json
"perf:budget": "node scripts/check-bundle-size.mjs"
```

### 3. ‚úÖ –°–æ–∑–¥–∞–Ω baseline –¥–æ–∫—É–º–µ–Ω—Ç

**–§–∞–π–ª**: `docs/perf-budget.md`
- –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –ª–∏–º–∏—Ç: 350 KB (gzip)
- –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π: `/` –∏ `/login`
- –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –∏–∑–º–µ—Ä–µ–Ω–∏—è
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### 4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω CI —à–∞–≥

**–§–∞–π–ª**: `.github/workflows/ci.yml`
- –î–æ–±–∞–≤–ª–µ–Ω —à–∞–≥ "Check bundle size (perf budget)" –ø–æ—Å–ª–µ build
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º PR –≤ `dev` –∏ `main`
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç PR –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –° –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –ª–∏–º–∏—Ç–æ–º (350 KB)
npm run perf:budget

# –° –∫–∞—Å—Ç–æ–º–Ω—ã–º –ª–∏–º–∏—Ç–æ–º
BUNDLE_BUDGET_KB=300 npm run perf:budget
```

### –í CI

–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –∫–∞–∂–¥–æ–º PR:
1. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `npm run build`
2. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `npm run perf:budget`
3. –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç - CI –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ bundle –¥–ª—è public —Å—Ç—Ä–∞–Ω–∏—Ü...

üì¶ –ó–∞–ø—É—Å–∫ build –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤ bundle...
üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏:

‚úÖ /                    245.5 KB (gzip) / 818.3 KB (raw)
‚úÖ /login               189.2 KB (gzip) / 630.7 KB (raw)

üìä –õ–∏–º–∏—Ç: 350 KB (gzip)

‚úÖ –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ª–∏–º–∏—Ç–∞!
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–∞

–õ–∏–º–∏—Ç –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:
1. –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è: `BUNDLE_BUDGET_KB=400 npm run perf:budget`
2. –í —Å–∫—Ä–∏–ø—Ç–µ: –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ `scripts/check-bundle-size.mjs`
3. –í CI: –¥–æ–±–∞–≤–∏—Ç—å `env: BUNDLE_BUDGET_KB: 400` –≤ workflow

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å `npm run perf:budget` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ build
2. –û–±–Ω–æ–≤–∏—Ç—å `docs/perf-budget.md` —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–∏–º–∏—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
